<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å¯¾æ•°é–¢æ•°ã®å·® â€” ã‚°ãƒ©ãƒ•ã®æ„å‘³</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: "Segoe UI", "Noto Sans JP", sans-serif; background: #f5f7fa; color: #222; line-height: 1.7; }
  h1 { text-align: center; padding: 32px 16px 8px; font-size: 1.8rem; color: #1a237e; }
  .subtitle { text-align: center; color: #666; margin-bottom: 32px; font-size: 0.95rem; }
  .container { max-width: 900px; margin: 0 auto; padding: 0 16px 60px; }
  .card { background: #fff; border-radius: 12px; padding: 28px 32px; margin-bottom: 28px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); }
  .card h2 { font-size: 1.2rem; color: #1565c0; margin-bottom: 14px; border-left: 4px solid #1565c0; padding-left: 10px; }
  .card h3 { font-size: 1rem; color: #37474f; margin: 18px 0 8px; }
  .eq-box { background: #e8eaf6; border-radius: 8px; padding: 14px 20px; margin: 14px 0; text-align: center; font-size: 1.1rem; font-family: "Cambria Math", Georgia, serif; color: #1a237e; }
  .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start; }
  canvas { display: block; border-radius: 8px; background: #fafafa; border: 1px solid #e0e0e0; }
  .caption { font-size: 0.82rem; color: #555; margin-top: 6px; text-align: center; }
  table { border-collapse: collapse; width: 100%; margin: 12px 0; }
  th { background: #e3f2fd; color: #0d47a1; padding: 8px 14px; text-align: center; }
  td { padding: 7px 14px; text-align: center; border-bottom: 1px solid #eee; }
  .highlight { color: #c62828; font-weight: 600; }
  .note { background: #fff8e1; border-left: 4px solid #f9a825; padding: 10px 16px; border-radius: 0 8px 8px 0; margin: 12px 0; font-size: 0.9rem; color: #5d4037; }
  .legend { display: flex; gap: 18px; flex-wrap: wrap; margin: 8px 0; font-size: 0.85rem; }
  .legend-item { display: flex; align-items: center; gap: 6px; }
  .legend-dot { width: 28px; height: 3px; border-radius: 2px; }
  @media (max-width: 600px) { .grid2 { grid-template-columns: 1fr; } }
</style>
</head>
<body>

<h1>å¯¾æ•°é–¢æ•°ã®å·® â€” ã‚°ãƒ©ãƒ•ä¸Šã®æ„å‘³</h1>
<p class="subtitle">3ã¤ã®è¦–ç‚¹ Â· æ•°ã¨å›³ã®èåˆ Â· ç”»åƒå‡¦ç†ã¸ã®å¿œç”¨</p>

<div class="container">

<!-- ===== SECTION 1 ===== -->
<div class="card">
  <h2>â‘  æ ¸å¿ƒç­‰å¼ï¼šå·® = æ¯”ç‡</h2>
  <div class="eq-box">log f(x) âˆ’ log g(x) = log <u>f(x)</u> / <u>g(x)</u></div>
  <p>å¯¾æ•°ç©ºé–“ã«ãŠã‘ã‚‹<strong>ç¸¦æ–¹å‘ã®é–“éš”</strong>ã¯ã€å…ƒã®ç©ºé–“ã§ã®<strong>å€ç‡ï¼ˆæ¯”ç‡ï¼‰</strong>ã«å¯¾å¿œã™ã‚‹ã€‚</p>
  <table>
    <tr><th>å…ƒã®ç©ºé–“ã§ã®æ“ä½œ</th><th>å¯¾æ•°ç©ºé–“ã§ã®æ“ä½œ</th></tr>
    <tr><td>f Ã— g</td><td>log f <span class="highlight">+</span> log g</td></tr>
    <tr><td>f / g</td><td>log f <span class="highlight">âˆ’</span> log g</td></tr>
  </table>
  <div class="note">ğŸ“Œ ã‚°ãƒ©ãƒ•ä¸Šã«ãŠã„ã¦ã€2æœ¬ã®å¯¾æ•°æ›²ç·šã®ã‚ã‚‹ç‚¹ã§ã®<strong>ç¸¦æ–¹å‘ã®è·é›¢</strong>ã¯ã€ãã®ç‚¹ã«ãŠã‘ã‚‹å…ƒã®é–¢æ•°ã®<strong>æ¯”ç‡ã®å¯¾æ•°</strong>ã§ã‚ã‚‹ã€‚</div>
  <canvas id="c1" width="800" height="300"></canvas>
  <div class="caption">å›³1ï¼šy=ln(x) ã¨ y=ln(3x)ã€ç¸¦æ–¹å‘ã®é–“éš”ã¯å¸¸ã« ln(3) â‰ˆ 1.099ï¼ˆç ´ç·šã§ç¤ºã™ï¼‰</div>
</div>

<!-- ===== SECTION 2 ===== -->
<div class="card">
  <h2>â‘¡ å®šæ•°å€ = ã‚°ãƒ©ãƒ•ã®å‚ç›´å¹³è¡Œç§»å‹•</h2>
  <div class="eq-box">log(c Â· x) âˆ’ log(x) = log c = å®šæ•°</div>
  <p>2ã¤ã®å¯¾æ•°é–¢æ•°ãŒå®šæ•°å€ã®å·®ã—ã‹ãªã„å ´åˆã€ãã‚Œã‚‰ã®æ›²ç·šã¯<strong>å½¢ãŒå®Œå…¨ã«åŒã˜</strong>ã§ã€å‚ç›´æ–¹å‘ã« log c ã ã‘ç§»å‹•ã—ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹ã€‚</p>
  <div class="grid2">
    <div>
      <canvas id="c2" width="380" height="280"></canvas>
      <div class="caption">å›³2ï¼šy=ln(x), y=ln(2x), y=ln(4x) â€” ç­‰é–“éš”ã®å¹³è¡Œç§»å‹•ã€å·®ã¯å®šæ•°</div>
    </div>
    <div>
      <h3>å¹¾ä½•å­¦çš„æ„å‘³</h3>
      <p>å…ƒã®ç©ºé–“ï¼šx è»¸æ–¹å‘ã®ã€Œã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ï¼ˆc å€ï¼‰</p>
      <p>â†“ å¯¾æ•°ã‚’ã¨ã‚‹</p>
      <p>å¯¾æ•°ç©ºé–“ï¼šy è»¸æ–¹å‘ã®ã€Œå¹³è¡Œç§»å‹•ã€ï¼ˆlog c ã‚’åŠ ç®—ï¼‰</p>
      <br>
      <div class="note">ã“ã‚ŒãŒå¯¾æ•°åº§æ¨™è»¸ãŒæŒ‡æ•°é–¢æ•°çš„ãªå¢—åŠ ã‚’ç¤ºã™æ›²ç·šã‚’<strong>ç›´ç·š</strong>ã«å¤‰æ›ã§ãã‚‹ç†ç”±ã§ã‚ã‚‹â€”â€”ä¹—ç®—ã®é–¢ä¿‚ãŒåŠ ç®—ï¼ˆç·šå½¢ï¼‰ã®é–¢ä¿‚ã«å¤‰ã‚ã‚‹ã€‚</div>
    </div>
  </div>
</div>

<!-- ===== SECTION 3 ===== -->
<div class="card">
  <h2>â‘¢ ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸ã®åœ§ç¸®ï¼šå¤§ããªæ¯”ç‡ãŒå°ã•ãªé–“éš”ã«</h2>
  <div class="eq-box">f/g = 10<sup>6</sup> &nbsp;â†’&nbsp; log f âˆ’ log g = 6ï¼ˆå·®ã¯ã‚ãšã‹6å˜ä½ï¼‰</div>
  <canvas id="c3" width="800" height="260"></canvas>
  <div class="caption">å›³3ï¼šå…ƒã®ç©ºé–“ã§100ä¸‡å€ã‚‚ã®å·®ãŒã‚ã‚‹é‡ãŒã€å¯¾æ•°ç©ºé–“ã§ã¯ã‚ãšã‹6ç›®ç››ã‚Šã®å·®ã«åã¾ã‚‹</div>
  <p style="margin-top:12px">å¯¾æ•°ã®å·®ã‚’ã¨ã‚‹ã“ã¨ã§ã€<strong>å…ƒã®å€¤ã®å¤§å°ã«é–¢ã‚ã‚‰ãš</strong>ã€ã‚°ãƒ©ãƒ•ä¸Šã®ç¸¦æ–¹å‘ã®é–“éš”ã¯è¦³å¯Ÿå¯èƒ½ãªç¯„å›²ã«åœ§ç¸®ã•ã‚Œã‚‹ã€‚<br>ã“ã‚ŒãŒå¯¾æ•°å¤‰æ›ãŒ<strong>ãƒã‚¤ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸</strong>ç”»åƒã‚’æ‰±ãˆã‚‹ç†ç”±ã§ã‚ã‚‹ã€‚</p>
</div>

<!-- ===== SECTION 4 ===== -->
<div class="card">
  <h2>â‘£ ç”»åƒå‡¦ç†ã¸ã®å¿œç”¨ï¼šãƒ›ãƒ¢ãƒ¢ãƒ«ãƒ•ã‚£ãƒƒã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</h2>
  <p>ç”»åƒè¼åº¦ = ç…§æ˜æˆåˆ† Ã— åå°„æˆåˆ†ï¼š</p>
  <div class="eq-box">f(x,y) = i(x,y) Â· r(x,y)</div>
  <p>å¯¾æ•°ã‚’ã¨ã‚‹ã¨ã€ä¹—ç®—ãŒåŠ ç®—ã«å¤‰ã‚ã‚‹ï¼š</p>
  <div class="eq-box">log f = <span style="color:#1565c0">log i</span> + <span style="color:#2e7d32">log r</span></div>
  <p>å¯¾æ•°åŸŸã§<strong>ä½å‘¨æ³¢æˆåˆ†ã‚’æ¸›ç®—</strong>ï¼ˆç…§æ˜é™¤å»ï¼‰ã™ã‚‹ã“ã¨ã¯ã€å…ƒã®åŸŸã§<strong>ç…§æ˜ã®å½±éŸ¿ã‚’é™¤å»</strong>ã™ã‚‹ã“ã¨ã¨ç­‰ä¾¡ã§ã‚ã‚‹ï¼š</p>
  <div class="eq-box">log f âˆ’ <span style="color:#1565c0">log i</span> = <span style="color:#2e7d32">log r</span> &nbsp;â†’&nbsp; åå°„ç‡ï¼ˆç‰©ä½“ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ï¼‰ã‚’å¾©å…ƒ</div>
  <canvas id="c4" width="800" height="240"></canvas>
  <div class="caption">å›³4ï¼šãƒ›ãƒ¢ãƒ¢ãƒ«ãƒ•ã‚£ãƒƒã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®æµã‚Œ â€” å¯¾æ•°åŸŸã§æ¸›ç®—ã™ã‚‹ã“ã¨ã§ç…§æ˜ã‚’é™¤å»ã—ã€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®ç´°éƒ¨ã‚’ä¿æŒã™ã‚‹</div>
</div>

<!-- ===== SECTION 5: å·®é–¢æ•°ã®å½¢æ…‹ ===== -->
<div class="card">
  <h2>â‘¤ å·®é–¢æ•°ã®å½¢æ…‹å¤‰åŒ–</h2>
  <p>2ã¤ã®å¯¾æ•°é–¢æ•°ã®é–¢ä¿‚ã«ã‚ˆã£ã¦ã€å·®é–¢æ•°ã¯ã•ã¾ã–ã¾ãªå½¢æ…‹ã‚’ã¨ã‚‹ï¼š</p>
  <div class="grid2">
    <div>
      <canvas id="c5a" width="370" height="260"></canvas>
      <div class="caption">ã‚±ãƒ¼ã‚¹Aï¼šln(xÂ²) âˆ’ ln(x) = ln(x)ã€å·®ã‚‚ã¾ãŸå¯¾æ•°é–¢æ•°ï¼ˆå˜èª¿å¢—åŠ ï¼‰</div>
    </div>
    <div>
      <canvas id="c5b" width="370" height="260"></canvas>
      <div class="caption">ã‚±ãƒ¼ã‚¹Bï¼šln(x+1) âˆ’ ln(x) = ln(1+1/x)ã€å·®ã¯å˜èª¿æ¸›å°‘ã—ã¦0ã«è¿‘ã¥ã</div>
    </div>
  </div>
  <div class="note" style="margin-top:16px">ğŸ“Œ <strong>ã¾ã¨ã‚ï¼š</strong>åˆ†å­ãŒåˆ†æ¯ã‚ˆã‚Šé€Ÿãå¢—åŠ ã™ã‚Œã°å·®é–¢æ•°ã¯å¢—åŠ ã™ã‚‹ã€‚ä¸¡è€…ã®å¢—åŠ ãŒè¿‘ã‘ã‚Œã°ã€å·®é–¢æ•°ã¯0ã«åæŸã™ã‚‹ï¼ˆæ›²ç·šãŒæœ€çµ‚çš„ã«ã€ŒåæŸã€ã™ã‚‹ï¼‰ã€‚</div>
</div>

</div><!-- /container -->

<script>
// ---- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ----
function initCtx(id) {
  const c = document.getElementById(id);
  c.width = c.offsetWidth || c.width;
  return { ctx: c.getContext('2d'), W: c.width, H: c.height };
}
function axes(ctx, W, H, ox, oy, xscale, yscale, xmax, ymin, ymax, labels) {
  ctx.save();
  ctx.strokeStyle = '#aaa'; ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(0, oy); ctx.lineTo(W, oy); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(ox, 0); ctx.lineTo(ox, H); ctx.stroke();
  ctx.fillStyle = '#888'; ctx.font = '11px sans-serif';
  for (let x = 1; x <= xmax; x++) {
    const px = ox + x * xscale;
    ctx.beginPath(); ctx.moveTo(px, oy-3); ctx.lineTo(px, oy+3); ctx.stroke();
    ctx.fillText(x, px-4, oy+14);
  }
  for (let y = Math.ceil(ymin); y <= Math.floor(ymax); y++) {
    if (y === 0) continue;
    const py = oy - y * yscale;
    ctx.beginPath(); ctx.moveTo(ox-3, py); ctx.lineTo(ox+3, py); ctx.stroke();
    ctx.fillText(y, ox-18, py+4);
  }
  if (labels) {
    ctx.fillStyle='#555'; ctx.font='12px sans-serif';
    ctx.fillText(labels.x || 'x', W-16, oy-6);
    ctx.fillText(labels.y || 'y', ox+6, 12);
  }
  ctx.restore();
}
function plotFn(ctx, ox, oy, xscale, yscale, fn, xmin, xmax, color, lw=2) {
  ctx.save(); ctx.strokeStyle=color; ctx.lineWidth=lw;
  ctx.beginPath(); let first=true;
  for (let px=0; px<=800; px++) {
    const xval = xmin + (px/800)*(xmax-xmin);
    const yval = fn(xval);
    if (!isFinite(yval)) { first=true; continue; }
    const sx = ox + xval*xscale, sy = oy - yval*yscale;
    if (first) { ctx.moveTo(sx,sy); first=false; } else ctx.lineTo(sx,sy);
  }
  ctx.stroke(); ctx.restore();
}

(function(){
  const {ctx,W,H} = initCtx('c1');
  const ox=50, oy=H/2+20, xs=80, ys=60;
  axes(ctx,W,H,ox,oy,xs,ys,8,-2,3,{x:'x',y:'y'});
  ctx.save(); ctx.globalAlpha=0.12; ctx.fillStyle='#7b1fa2';
  ctx.beginPath();
  for(let px=0;px<=700;px++){const xv=0.05+px/700*7.95;const sy1=oy-Math.log(xv)*ys;ctx.lineTo(ox+xv*xs,sy1);}
  for(let px=700;px>=0;px--){const xv=0.05+px/700*7.95;const sy2=oy-Math.log(3*xv)*ys;ctx.lineTo(ox+xv*xs,sy2);}
  ctx.closePath(); ctx.fill(); ctx.restore();
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x),0.05,8,'#1565c0',2.5);
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(3*x),0.05,8,'#c62828',2.5);
  const xd=3, y1=Math.log(xd), y2=Math.log(3*xd);
  ctx.save(); ctx.setLineDash([5,4]); ctx.strokeStyle='#7b1fa2'; ctx.lineWidth=1.5;
  ctx.beginPath(); ctx.moveTo(ox+xd*xs,oy-y1*ys); ctx.lineTo(ox+xd*xs,oy-y2*ys); ctx.stroke();
  ctx.setLineDash([]);
  const arrX=ox+xd*xs, top=oy-y2*ys, bot=oy-y1*ys;
  ctx.beginPath(); ctx.moveTo(arrX,top); ctx.lineTo(arrX-5,top+9); ctx.lineTo(arrX+5,top+9); ctx.closePath(); ctx.fillStyle='#7b1fa2'; ctx.fill();
  ctx.beginPath(); ctx.moveTo(arrX,bot); ctx.lineTo(arrX-5,bot-9); ctx.lineTo(arrX+5,bot-9); ctx.closePath(); ctx.fill();
  ctx.font='bold 12px sans-serif'; ctx.fillStyle='#7b1fa2';
  ctx.fillText('é–“éš” = ln3 â‰ˆ 1.10', arrX+8, (top+bot)/2+4);
  ctx.restore();
  ctx.font='13px sans-serif';
  ctx.fillStyle='#1565c0'; ctx.fillRect(ox+10,12,24,3); ctx.fillText('y = ln(x)',ox+38,17);
  ctx.fillStyle='#c62828'; ctx.fillRect(ox+10,24,24,3); ctx.fillText('y = ln(3x)',ox+38,29);
  ctx.fillStyle='#7b1fa2'; ctx.fillRect(ox+130,12,24,3); ctx.fillText('å·® = ln(3) = å®šæ•°',ox+158,17);
})();

(function(){
  const {ctx,W,H} = initCtx('c2');
  const ox=45,oy=H/2+30,xs=50,ys=45;
  axes(ctx,W,H,ox,oy,xs,ys,6,-3,3,{x:'x',y:'y'});
  const cols=['#1565c0','#2e7d32','#e65100'];
  const cs=[1,2,4];
  cs.forEach((c,i)=>{ plotFn(ctx,ox,oy,xs,ys,x=>Math.log(c*x),0.05,6,cols[i],2); });
  ctx.font='12px sans-serif';
  ['y=ln(x)','y=ln(2x)','y=ln(4x)'].forEach((lbl,i)=>{
    ctx.fillStyle=cols[i]; ctx.fillRect(10,10+i*18,18,2.5); ctx.fillText(lbl,32,14+i*18);
  });
  ctx.save(); ctx.setLineDash([4,3]); ctx.strokeStyle='#999'; ctx.lineWidth=1;
  [1,2,4].forEach(c=>{
    const xd=4.5, py=oy-Math.log(c*xd)*ys, px=ox+xd*xs;
    ctx.beginPath(); ctx.moveTo(ox,py); ctx.lineTo(px,py); ctx.stroke();
  });
  ctx.restore();
})();

(function(){
  const {ctx,W,H} = initCtx('c3');
  const logy = H*0.25, origY = H*0.72;
  const margin=80, rw=W-margin*2;
  ctx.fillStyle='#e3f2fd'; ctx.fillRect(margin,origY-18,rw,36);
  ctx.strokeStyle='#90caf9'; ctx.lineWidth=1; ctx.strokeRect(margin,origY-18,rw,36);
  ctx.font='bold 13px sans-serif'; ctx.fillStyle='#0d47a1'; ctx.fillText('å…ƒã®ç©ºé–“ï¼ˆç·šå½¢ï¼‰',margin,origY-24);
  const vals=[1,10,1000,1e6];
  const maxv=1e6;
  const cols=['#1565c0','#2e7d32','#e65100','#c62828'];
  vals.forEach((v,i)=>{
    const px=margin+v/maxv*rw;
    ctx.fillStyle=cols[i]; ctx.beginPath(); ctx.arc(px,origY,7,0,Math.PI*2); ctx.fill();
    ctx.fillStyle='#333'; ctx.font='11px sans-serif'; ctx.textAlign='center';
    ctx.fillText(v>=1000?(v>=1e6?'10â¶':'10Â³'):String(v),px,origY+22);
  });
  ctx.textAlign='left';
  ctx.fillStyle='#f3e5f5'; ctx.fillRect(margin,logy-18,rw,36);
  ctx.strokeStyle='#ce93d8'; ctx.lineWidth=1; ctx.strokeRect(margin,logy-18,rw,36);
  ctx.font='bold 13px sans-serif'; ctx.fillStyle='#6a1b9a'; ctx.fillText('å¯¾æ•°ç©ºé–“ logâ‚â‚€',margin,logy-24);
  const logmax=6;
  vals.forEach((v,i)=>{
    const lv=Math.log10(v||0.1);
    const px=margin+lv/logmax*rw;
    ctx.fillStyle=cols[i]; ctx.beginPath(); ctx.arc(px,logy,7,0,Math.PI*2); ctx.fill();
    ctx.fillStyle='#333'; ctx.font='11px sans-serif'; ctx.textAlign='center';
    ctx.fillText('log='+Math.log10(v).toFixed(0),px,logy+22);
  });
  ctx.textAlign='left';
  vals.forEach((v,i)=>{
    const pxO=margin+v/maxv*rw, pxL=margin+(Math.log10(v||0.1)/logmax)*rw;
    ctx.save(); ctx.setLineDash([4,3]); ctx.strokeStyle=cols[i]; ctx.lineWidth=1; ctx.globalAlpha=0.6;
    ctx.beginPath(); ctx.moveTo(pxO,origY-18); ctx.lineTo(pxL,logy+18); ctx.stroke();
    ctx.restore();
  });
  ctx.fillStyle='#555'; ctx.font='12px sans-serif';
  ctx.fillText('â† å·¦ç«¯ã«é›†ä¸­ã—ã€åŒºåˆ¥å›°é›£', margin, origY-24+14+8);
  ctx.fillText('â† å‡ç­‰ã«åˆ†å¸ƒã—ã€æ˜ç¢ºã«è­˜åˆ¥å¯èƒ½', margin, logy-24+14+8);
})();

(function(){
  const {ctx,W,H} = initCtx('c4');
  const boxes=[
    {x:20, y:H/2-25, w:110, h:50, label:'f(x,y)\n=iÂ·r', color:'#e3f2fd', border:'#1565c0'},
    {x:170,y:H/2-25, w:110, h:50, label:'log f\n=log i+log r', color:'#e8f5e9', border:'#2e7d32'},
    {x:330,y:H/2-25, w:130, h:50, label:'âˆ’ log i\n(ä½å‘¨æ³¢ã‚’æ¸›ç®—)', color:'#fce4ec', border:'#c62828'},
    {x:510,y:H/2-25, w:110, h:50, label:'log r\n(åå°„ç‡)', color:'#f3e5f5', border:'#7b1fa2'},
    {x:670,y:H/2-25, w:110, h:50, label:'e^(log r) = r\n(ãƒ†ã‚¯ã‚¹ãƒãƒ£)', color:'#fff8e1', border:'#f57f17'},
  ];
  const ops=['log ã‚’ã¨ã‚‹','å‘¨æ³¢æ•°åŸŸã§æ¸›ç®—','ä¿æŒ','exp(Â·)'];
  function roundRect(ctx,x,y,w,h,r){
    ctx.beginPath(); ctx.moveTo(x+r,y); ctx.lineTo(x+w-r,y);
    ctx.arcTo(x+w,y,x+w,y+r,r); ctx.lineTo(x+w,y+h-r);
    ctx.arcTo(x+w,y+h,x+w-r,y+h,r); ctx.lineTo(x+r,y+h);
    ctx.arcTo(x,y+h,x,y+h-r,r); ctx.lineTo(x,y+r);
    ctx.arcTo(x,y,x+r,y,r); ctx.closePath();
  }
  boxes.forEach((b,i)=>{
    ctx.fillStyle=b.color; ctx.strokeStyle=b.border; ctx.lineWidth=2;
    roundRect(ctx,b.x,b.y,b.w,b.h,8); ctx.fill(); ctx.stroke();
    ctx.fillStyle='#222'; ctx.font='bold 11px sans-serif'; ctx.textAlign='center';
    const lines=b.label.split('\n');
    lines.forEach((l,li)=>ctx.fillText(l,b.x+b.w/2,b.y+22+li*15));
  });
  ctx.textAlign='left';
  for(let i=0;i<boxes.length-1;i++){
    const bx=boxes[i], nx=boxes[i+1];
    const x1=bx.x+bx.w, y1=bx.y+bx.h/2, x2=nx.x, y2=nx.y+nx.h/2;
    ctx.strokeStyle='#888'; ctx.lineWidth=1.5;
    ctx.beginPath(); ctx.moveTo(x1,y1); ctx.lineTo(x2,y2); ctx.stroke();
    ctx.fillStyle='#888';
    ctx.beginPath(); ctx.moveTo(x2,y2); ctx.lineTo(x2-10,y2-5); ctx.lineTo(x2-10,y2+5); ctx.closePath(); ctx.fill();
    ctx.fillStyle='#555'; ctx.font='10px sans-serif'; ctx.textAlign='center';
    ctx.fillText(ops[i],(x1+x2)/2,y1-8);
  }
  ctx.textAlign='left';
})();

(function(){
  const {ctx,W,H} = initCtx('c5a');
  const ox=45,oy=H/2+20,xs=55,ys=50;
  axes(ctx,W,H,ox,oy,xs,ys,5,-2,3,{x:'x',y:'y'});
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x*x),0.1,5,'#1565c0',2);
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x),0.1,5,'#2e7d32',2);
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x*x)-Math.log(x),0.1,5,'#c62828',2.5);
  ctx.font='11px sans-serif';
  [['#1565c0','y=ln(xÂ²)'],['#2e7d32','y=ln(x)'],['#c62828','å·®=ln(x)ï¼ˆå˜èª¿å¢—åŠ ï¼‰']].forEach(([c,l],i)=>{
    ctx.fillStyle=c; ctx.fillRect(6,8+i*16,18,2.5); ctx.fillText(l,28,13+i*16);
  });
})();

(function(){
  const {ctx,W,H} = initCtx('c5b');
  const ox=45,oy=H-40,xs=40,ys=130;
  axes(ctx,W,H,ox,oy,xs,ys,7,0,2,{x:'x',y:'y'});
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x+1),0.05,7,'#1565c0',2);
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x),0.05,7,'#2e7d32',2);
  plotFn(ctx,ox,oy,xs,ys,x=>Math.log(x+1)-Math.log(x),0.05,7,'#c62828',2.5);
  ctx.save(); ctx.setLineDash([5,4]); ctx.strokeStyle='#aaa'; ctx.lineWidth=1;
  ctx.beginPath(); ctx.moveTo(ox,oy); ctx.lineTo(W,oy); ctx.stroke();
  ctx.restore();
  ctx.fillStyle='#999'; ctx.font='10px sans-serif'; ctx.fillText('y=0 æ¼¸è¿‘ç·š',W-90,oy-5);
  ctx.font='11px sans-serif';
  [['#1565c0','y=ln(x+1)'],['#2e7d32','y=ln(x)'],['#c62828','å·®â†’0ï¼ˆå˜èª¿æ¸›å°‘ï¼‰']].forEach(([c,l],i)=>{
    ctx.fillStyle=c; ctx.fillRect(6,8+i*16,18,2.5); ctx.fillText(l,28,13+i*16);
  });
})();
</script>
</body>
</html>